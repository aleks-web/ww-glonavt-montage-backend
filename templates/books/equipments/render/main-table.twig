{#
    request_params - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
    equipments - –º–∞—Å—Å–∏–≤ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
    equipments.{key}.objects - –º–∞—Å—Å–∏–≤ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏. –û–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–∞–Ω–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
    equipments_statuses - —Å—Ç–∞—Ç—É—Å—ã –¥–ª—è –∑–∞–ø–∏—Å–µ–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞
#}

{% set count_active_equipment = 0 %}
{% for equipment in equipments %}
    {% if equipment.status == equipments_statuses.STATUS_ACTIVE %}
        {% set count_active_equipment = count_active_equipment + 1 %}
    {% endif %}
{% endfor %}

<div class="content-table">
    <div class="content-table__container">

        {% if count_active_equipment > 0 %}
            <table>
                <thead>
                    <tr>
                        <th class="text-center" width="10%">‚Ññ –ø/–ø</th>
                        <th class="text-start" style="margin-left: 10px">–¢–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</th>
                        <th class="text-center" style="margin-left: 10px">–°—Ç–∞—Ç—É—Å</th>
                    </tr>
                </thead>

                <tbody>
                    {% for equipment in equipments %}
                        {% if equipment.status != equipments_statuses.STATUS_DELETED %}
                            <tr>
                                <td class="text-center">{{ equipment.id }}</td>
                                <td class="text-start">{{ equipment.name }}</td>
                                <td class="text-center">{{ equipment.status }}</td>
                                
                                <td class="td-btn-default">
                                    <svg class="hover"><use xlink:href="#svg-edit"></use></svg>
                                </td>
                                <td class="td-btn-default">
                                    <svg class="hover" onclick="delete_equipment({{ equipment.id }})"><use xlink:href="#svg-del"></use></svg>
                                </td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <div style="display: flex; gap: 10px; align-items: center; flex-direction: column; justify-content: center; height: 100%;font-size: 2rem;">
                <span style="font-size: 3rem;">üôÅ</span>
                {% if request_params.control_panel_condition != '' %}
                    <span>–¢–∞–∫–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –Ω–µ –Ω–∞—à–ª–æ—Å—å</span>
                {% else %}
                    <span>–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –Ω–µ—Ç!</span>
                {% endif %}
                <button data-fancybox data-src="#fmodal-book-new-type-equipment"" class="btn">–î–æ–±–∞–≤–∏—Ç—å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</button>
            </div>
        {% endif %}

    </div>
</div>

{# Start —É–¥–∞–ª–µ–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è #}
<script>
function delete_equipment(id) {
    let formData = new FormData();

    formData.append('id', id);
    formData.append('status', {{ equipments_statuses.STATUS_DELETED }});

    $.ajax({
        url: API_V1_URLS.book_equipments.update,
        method: "POST",
        data: formData,
        processData: false,
        contentType: false,
        success: function (response) {

            if (response.status == "success") {
                xrender_main_table_book_equipments(1);
            }

            dd(response, `–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ ${API_V1_URLS.book_equipments.update}`);
        }
    });
}
</script>
{# End —É–¥–∞–ª–µ–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è #}